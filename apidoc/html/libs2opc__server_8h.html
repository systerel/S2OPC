<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>S2OPC OPCUA Toolkit: src/ClientServer/frontend/server_wrapper/libs2opc_server.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">S2OPC OPCUA Toolkit
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c3d037eb94fa1aa7134660c2803d99ab.html">ClientServer</a></li><li class="navelem"><a class="el" href="dir_47fed5d539b73ed9dc6fc81238e653d6.html">frontend</a></li><li class="navelem"><a class="el" href="dir_95e0d6015d0b9f13088874e6d4742672.html">server_wrapper</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">libs2opc_server.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>High level interface to run an OPC UA server.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;<a class="el" href="libs2opc__server__config_8h_source.html">libs2opc_server_config.h</a>&quot;</code><br />
</div>
<p><a href="libs2opc__server_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a22e06f936ca70219c737038da34da770"><td class="memItemLeft" align="right" valign="top">typedef void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libs2opc__server_8h.html#a22e06f936ca70219c737038da34da770">SOPC_ServerStopped_Fct</a>(<a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a> status)</td></tr>
<tr class="memdesc:a22e06f936ca70219c737038da34da770"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of callback called when server stopped.  <a href="libs2opc__server_8h.html#a22e06f936ca70219c737038da34da770">More...</a><br /></td></tr>
<tr class="separator:a22e06f936ca70219c737038da34da770"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af4ba08c235a2a13ad69c927a55071f80"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libs2opc__server_8h.html#af4ba08c235a2a13ad69c927a55071f80">SOPC_ServerHelper_StartServer</a> (<a class="el" href="libs2opc__server_8h.html#a22e06f936ca70219c737038da34da770">SOPC_ServerStopped_Fct</a> *stoppedCb)</td></tr>
<tr class="memdesc:af4ba08c235a2a13ad69c927a55071f80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the server asynchronously. Server information node is updated and endpoints are asynchronously requested to be opened.  <a href="libs2opc__server_8h.html#af4ba08c235a2a13ad69c927a55071f80">More...</a><br /></td></tr>
<tr class="separator:af4ba08c235a2a13ad69c927a55071f80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63f4ed5c688bdd096abdfb3d54be95c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libs2opc__server_8h.html#a63f4ed5c688bdd096abdfb3d54be95c2">SOPC_ServerHelper_StopServer</a> (void)</td></tr>
<tr class="memdesc:a63f4ed5c688bdd096abdfb3d54be95c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call to stop the server started with SOPC_ServerHelper_StartServer. If server started with <a class="el" href="libs2opc__server_8h.html#af4ba08c235a2a13ad69c927a55071f80" title="Start the server asynchronously. Server information node is updated and endpoints are asynchronously ...">SOPC_ServerHelper_StartServer</a>, this call is blocking during shutdown phase and <a class="el" href="libs2opc__server_8h.html#a22e06f936ca70219c737038da34da770" title="Type of callback called when server stopped.">SOPC_ServerStopped_Fct</a> is called on actual shutdown. Caller is responsible to wait for <a class="el" href="libs2opc__server_8h.html#a22e06f936ca70219c737038da34da770" title="Type of callback called when server stopped.">SOPC_ServerStopped_Fct</a> call prior to use any <a class="el" href="libs2opc__server__config_8h.html#afa682989be02b4c6292e83af9b066e91" title="Clear the S2OPC Server frontend configuration It shall be done before a call to SOPC_CommonHelper_Cle...">SOPC_ServerConfigHelper_Clear</a> function. If server started with <a class="el" href="libs2opc__server_8h.html#ae5e7086370ec8002d439e256d92486c3" title="Run the server synchronously (alternative to SOPC_ServerHelper_StartServer) Server information node i...">SOPC_ServerHelper_Serve</a>, this call is asynchronous and server is actually stopped on <a class="el" href="libs2opc__server_8h.html#ae5e7086370ec8002d439e256d92486c3" title="Run the server synchronously (alternative to SOPC_ServerHelper_StartServer) Server information node i...">SOPC_ServerHelper_Serve</a> return (after shutdown phase).  <a href="libs2opc__server_8h.html#a63f4ed5c688bdd096abdfb3d54be95c2">More...</a><br /></td></tr>
<tr class="separator:a63f4ed5c688bdd096abdfb3d54be95c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5e7086370ec8002d439e256d92486c3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libs2opc__server_8h.html#ae5e7086370ec8002d439e256d92486c3">SOPC_ServerHelper_Serve</a> (bool catchSigStop)</td></tr>
<tr class="memdesc:ae5e7086370ec8002d439e256d92486c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the server synchronously (alternative to <a class="el" href="libs2opc__server_8h.html#af4ba08c235a2a13ad69c927a55071f80" title="Start the server asynchronously. Server information node is updated and endpoints are asynchronously ...">SOPC_ServerHelper_StartServer</a>) Server information node is updated and endpoints are opened. Run until requested to stop (call to <a class="el" href="libs2opc__server_8h.html#a63f4ed5c688bdd096abdfb3d54be95c2" title="Call to stop the server started with SOPC_ServerHelper_StartServer. If server started with SOPC_Serve...">SOPC_ServerHelper_StopServer</a> or signal stop if active) or on endpoint opening error.  <a href="libs2opc__server_8h.html#ae5e7086370ec8002d439e256d92486c3">More...</a><br /></td></tr>
<tr class="separator:ae5e7086370ec8002d439e256d92486c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7760757945de93872bea0e2c39622ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libs2opc__server_8h.html#aa7760757945de93872bea0e2c39622ba">SOPC_ServerHelper_LocalServiceAsync</a> (void *request, uintptr_t userContext)</td></tr>
<tr class="memdesc:aa7760757945de93872bea0e2c39622ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes a local OPC UA service on server (read, write, browse or discovery service) asynchronously. On local service response callback configured through <a class="el" href="libs2opc__server__config_8h.html#a14da0448344368579f5721302fa9e5a1" title="Define the local service response callback to be used.">SOPC_ServerConfigHelper_SetLocalServiceAsyncResponse</a> will be called.  <a href="libs2opc__server_8h.html#aa7760757945de93872bea0e2c39622ba">More...</a><br /></td></tr>
<tr class="separator:aa7760757945de93872bea0e2c39622ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6258a4c6dddd2b9c28e635488e437823"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libs2opc__server_8h.html#a6258a4c6dddd2b9c28e635488e437823">SOPC_ServerHelper_LocalServiceSync</a> (void *request, void **response)</td></tr>
<tr class="memdesc:a6258a4c6dddd2b9c28e635488e437823"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes a local OPC UA service on server (read, write, browse or discovery service) synchronously.  <a href="libs2opc__server_8h.html#a6258a4c6dddd2b9c28e635488e437823">More...</a><br /></td></tr>
<tr class="separator:a6258a4c6dddd2b9c28e635488e437823"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>High level interface to run an OPC UA server. </p>
<p>Once the server is configured using functions of <a class="el" href="libs2opc__server__config_8h.html" title="High level interface to configure an OPC UA server.">libs2opc_server_config.h</a>, the server should be started using <a class="el" href="libs2opc__server_8h.html#af4ba08c235a2a13ad69c927a55071f80" title="Start the server asynchronously. Server information node is updated and endpoints are asynchronously ...">SOPC_ServerHelper_StartServer</a> (or <a class="el" href="libs2opc__server_8h.html#ae5e7086370ec8002d439e256d92486c3" title="Run the server synchronously (alternative to SOPC_ServerHelper_StartServer) Server information node i...">SOPC_ServerHelper_Serve</a>). Until it is stopped by call to <a class="el" href="libs2opc__server_8h.html#a63f4ed5c688bdd096abdfb3d54be95c2" title="Call to stop the server started with SOPC_ServerHelper_StartServer. If server started with SOPC_Serve...">SOPC_ServerHelper_StopServer</a> or due to an error (listening address busy, etc.), the server is then accessible for connections by OPC UA client applications and local access/modification of address space content by server application itself. This is done using same OPC UA services client are using but in a local way called "local services" in this server API trough <a class="el" href="libs2opc__server_8h.html#aa7760757945de93872bea0e2c39622ba" title="Executes a local OPC UA service on server (read, write, browse or discovery service) asynchronously....">SOPC_ServerHelper_LocalServiceAsync</a> (or <a class="el" href="libs2opc__server_8h.html#a6258a4c6dddd2b9c28e635488e437823" title="Executes a local OPC UA service on server (read, write, browse or discovery service) synchronously.">SOPC_ServerHelper_LocalServiceSync</a>)</p>
<dl class="section note"><dt>Note</dt><dd>Local services: Local services are restricted to a minimal set of services to access or modify address space content without any access restriction. This is the way to access or modify data of the server in the server application itself.</dd>
<dd>
When server is started, the configuration is freezed and the Server node content is initialized </dd></dl>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a22e06f936ca70219c737038da34da770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22e06f936ca70219c737038da34da770">&#9670;&nbsp;</a></span>SOPC_ServerStopped_Fct</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void SOPC_ServerStopped_Fct(<a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a> status)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of callback called when server stopped. </p>
<dl class="section warning"><dt>Warning</dt><dd>No blocking operation shall be done in callback</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">status</td><td>Indicates the return status of server, SOPC_STATUS_OK if stopped on purpose. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af4ba08c235a2a13ad69c927a55071f80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4ba08c235a2a13ad69c927a55071f80">&#9670;&nbsp;</a></span>SOPC_ServerHelper_StartServer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a> SOPC_ServerHelper_StartServer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libs2opc__server_8h.html#a22e06f936ca70219c737038da34da770">SOPC_ServerStopped_Fct</a> *&#160;</td>
          <td class="paramname"><em>stoppedCb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the server asynchronously. Server information node is updated and endpoints are asynchronously requested to be opened. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stoppedCb</td><td>callback called when server will stop (on purpose or due to endpoint opening isssue), it is mandatory to define it and to wait it is called after call to <a class="el" href="libs2opc__server_8h.html#a63f4ed5c688bdd096abdfb3d54be95c2" title="Call to stop the server started with SOPC_ServerHelper_StartServer. If server started with SOPC_Serve...">SOPC_ServerHelper_StopServer</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SOPC_STATUS_OK in case of success, otherwise SOPC_STATUS_INVALID_STATE if the configuration is not possible (toolkit not initialized, server already started). </dd></dl>

</div>
</div>
<a id="a63f4ed5c688bdd096abdfb3d54be95c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63f4ed5c688bdd096abdfb3d54be95c2">&#9670;&nbsp;</a></span>SOPC_ServerHelper_StopServer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a> SOPC_ServerHelper_StopServer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call to stop the server started with SOPC_ServerHelper_StartServer. If server started with <a class="el" href="libs2opc__server_8h.html#af4ba08c235a2a13ad69c927a55071f80" title="Start the server asynchronously. Server information node is updated and endpoints are asynchronously ...">SOPC_ServerHelper_StartServer</a>, this call is blocking during shutdown phase and <a class="el" href="libs2opc__server_8h.html#a22e06f936ca70219c737038da34da770" title="Type of callback called when server stopped.">SOPC_ServerStopped_Fct</a> is called on actual shutdown. Caller is responsible to wait for <a class="el" href="libs2opc__server_8h.html#a22e06f936ca70219c737038da34da770" title="Type of callback called when server stopped.">SOPC_ServerStopped_Fct</a> call prior to use any <a class="el" href="libs2opc__server__config_8h.html#afa682989be02b4c6292e83af9b066e91" title="Clear the S2OPC Server frontend configuration It shall be done before a call to SOPC_CommonHelper_Cle...">SOPC_ServerConfigHelper_Clear</a> function. If server started with <a class="el" href="libs2opc__server_8h.html#ae5e7086370ec8002d439e256d92486c3" title="Run the server synchronously (alternative to SOPC_ServerHelper_StartServer) Server information node i...">SOPC_ServerHelper_Serve</a>, this call is asynchronous and server is actually stopped on <a class="el" href="libs2opc__server_8h.html#ae5e7086370ec8002d439e256d92486c3" title="Run the server synchronously (alternative to SOPC_ServerHelper_StartServer) Server information node i...">SOPC_ServerHelper_Serve</a> return (after shutdown phase). </p>
<dl class="section return"><dt>Returns</dt><dd>SOPC_STATUS_OK in case of success, otherwise SOPC_STATUS_INVALID_STATE if the server is not running.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Server stops after configured seconds for shutdown phase (see <a class="el" href="libs2opc__server__config_8h.html#ae93fae3239889e10b75c41d3ca61d26e" title="Define duration of the shutdown phase when stopping the server.">SOPC_ServerConfigHelper_SetShutdownCountdown</a> ) to indicate shutdown in ServerState node </dd></dl>

</div>
</div>
<a id="ae5e7086370ec8002d439e256d92486c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5e7086370ec8002d439e256d92486c3">&#9670;&nbsp;</a></span>SOPC_ServerHelper_Serve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a> SOPC_ServerHelper_Serve </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>catchSigStop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the server synchronously (alternative to <a class="el" href="libs2opc__server_8h.html#af4ba08c235a2a13ad69c927a55071f80" title="Start the server asynchronously. Server information node is updated and endpoints are asynchronously ...">SOPC_ServerHelper_StartServer</a>) Server information node is updated and endpoints are opened. Run until requested to stop (call to <a class="el" href="libs2opc__server_8h.html#a63f4ed5c688bdd096abdfb3d54be95c2" title="Call to stop the server started with SOPC_ServerHelper_StartServer. If server started with SOPC_Serve...">SOPC_ServerHelper_StopServer</a> or signal stop if active) or on endpoint opening error. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">catchSigStop</td><td>If set to true, the stop signal (Ctrl+C) is caught and server shutdown initiated. When flag is set the server will stop on first event occurring between stop signal and call to <a class="el" href="libs2opc__server_8h.html#a63f4ed5c688bdd096abdfb3d54be95c2" title="Call to stop the server started with SOPC_ServerHelper_StartServer. If server started with SOPC_Serve...">SOPC_ServerHelper_StopServer</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SOPC_STATUS_OK in case server stopped on purpose, SOPC_STATUS_INVALID_STATE if the configuration is not possible (toolkit not initialized, server already started), otherwise error status.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Server stops after configured seconds for shutdown phase (see <a class="el" href="libs2opc__server__config_8h.html#ae93fae3239889e10b75c41d3ca61d26e" title="Define duration of the shutdown phase when stopping the server.">SOPC_ServerConfigHelper_SetShutdownCountdown</a> ) to indicate shutdown in ServerState node </dd></dl>

</div>
</div>
<a id="aa7760757945de93872bea0e2c39622ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7760757945de93872bea0e2c39622ba">&#9670;&nbsp;</a></span>SOPC_ServerHelper_LocalServiceAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a> SOPC_ServerHelper_LocalServiceAsync </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>userContext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes a local OPC UA service on server (read, write, browse or discovery service) asynchronously. On local service response callback configured through <a class="el" href="libs2opc__server__config_8h.html#a14da0448344368579f5721302fa9e5a1" title="Define the local service response callback to be used.">SOPC_ServerConfigHelper_SetLocalServiceAsyncResponse</a> will be called. </p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="libs2opc__server_8h.html#af4ba08c235a2a13ad69c927a55071f80" title="Start the server asynchronously. Server information node is updated and endpoints are asynchronously ...">SOPC_ServerHelper_StartServer</a> or <a class="el" href="libs2opc__server_8h.html#ae5e7086370ec8002d439e256d92486c3" title="Run the server synchronously (alternative to SOPC_ServerHelper_StartServer) Server information node i...">SOPC_ServerHelper_Serve</a> shall have been called and the server shall still running</dd>
<dd>
Local services are not restricted by AccessLevel attribute value but only Value attribute is modifiable.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>An instance of the following OPC UA requests:<ul>
<li><a class="el" href="sopc__types_8h.html#a15deb1b977da58a4de8fd9df40b2cc9c">OpcUa_AddNodesRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#aed9198a8cbdd05b6818034ecb4b3a3b1">OpcUa_ReadRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#a065a536c54432f99645effc7f16e240a">OpcUa_WriteRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#a9cab834d7c5fa7a948e5a5d9f7e016db">OpcUa_BrowseRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#a33685ba2b2d8a003a93ac20525e857a5">OpcUa_TranslateBrowsePathsToNodeIdsRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#ae64646b513a1d0cd029f440471c75e79">OpcUa_GetEndpointsRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#abe197aeed46a73ccedcd82b5ad294a42">OpcUa_FindServersRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#a06c2a267179ed91bd3b5ae5da6d075cc">OpcUa_FindServersOnNetworkRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#afadd9038316f5832b7ccea9f3c1c8210">OpcUa_RegisterServer2Request</a></li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<p>The request messages can be built using the helper functions of <a class="el" href="libs2opc__request__builder_8h.html" title="High level interface to build OPC UA request and access OPC UA response.">libs2opc_request_builder.h</a> (e.g.: <a class="el" href="libs2opc__request__builder_8h.html#aa4cf92ed37db44435aeadec5cdd48488" title="Creates a read request.">SOPC_ReadRequest_Create</a>, <a class="el" href="libs2opc__request__builder_8h.html#ad4173e51037e5a579c75c88ed136f531" title="Sets the value to read at given index in read request.">SOPC_ReadRequest_SetReadValue</a>, etc.).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">userContext</td><td>User defined context that will be provided with the corresponding response in <a class="el" href="libs2opc__server__config_8h.html#ab044fa72d01b0a3cf2340a4265cb2ba6" title="Type of callback to provide to receive asynchronous local service response.">SOPC_LocalServiceAsyncResp_Fct</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SOPC_STATUS_OK in case of success, otherwise SOPC_STATUS_INVALID_STATE if the server is not running.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>request memory is managed by the server after a successful return </dd></dl>

</div>
</div>
<a id="a6258a4c6dddd2b9c28e635488e437823"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6258a4c6dddd2b9c28e635488e437823">&#9670;&nbsp;</a></span>SOPC_ServerHelper_LocalServiceSync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a> SOPC_ServerHelper_LocalServiceSync </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes a local OPC UA service on server (read, write, browse or discovery service) synchronously. </p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="libs2opc__server_8h.html#af4ba08c235a2a13ad69c927a55071f80" title="Start the server asynchronously. Server information node is updated and endpoints are asynchronously ...">SOPC_ServerHelper_StartServer</a> or <a class="el" href="libs2opc__server_8h.html#ae5e7086370ec8002d439e256d92486c3" title="Run the server synchronously (alternative to SOPC_ServerHelper_StartServer) Server information node i...">SOPC_ServerHelper_Serve</a> shall have been called and the server shall still running</dd>
<dd>
Local services are not restricted by AccessLevel attribute value but only Value attribute is modifiable.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Concurrent synchronous calls are not supported and <a class="el" href="sopc__enums_8h.html#a8419f6ec9e9cf6f33b24806124972652ada107929146a0a119957fda109740f6e">SOPC_STATUS_INVALID_STATE</a> will be returned if called concurrently</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>An instance of on of the following OPC UA request:<ul>
<li><a class="el" href="sopc__types_8h.html#a15deb1b977da58a4de8fd9df40b2cc9c">OpcUa_AddNodesRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#aed9198a8cbdd05b6818034ecb4b3a3b1">OpcUa_ReadRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#a065a536c54432f99645effc7f16e240a">OpcUa_WriteRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#a9cab834d7c5fa7a948e5a5d9f7e016db">OpcUa_BrowseRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#a33685ba2b2d8a003a93ac20525e857a5">OpcUa_TranslateBrowsePathsToNodeIdsRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#ae64646b513a1d0cd029f440471c75e79">OpcUa_GetEndpointsRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#abe197aeed46a73ccedcd82b5ad294a42">OpcUa_FindServersRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#a06c2a267179ed91bd3b5ae5da6d075cc">OpcUa_FindServersOnNetworkRequest</a></li>
<li><a class="el" href="sopc__types_8h.html#afadd9038316f5832b7ccea9f3c1c8210">OpcUa_RegisterServer2Request</a></li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<p>The request messages can be built using the helper functions of <a class="el" href="libs2opc__request__builder_8h.html" title="High level interface to build OPC UA request and access OPC UA response.">libs2opc_request_builder.h</a> (e.g.: <a class="el" href="libs2opc__request__builder_8h.html#aa4cf92ed37db44435aeadec5cdd48488" title="Creates a read request.">SOPC_ReadRequest_Create</a>, <a class="el" href="libs2opc__request__builder_8h.html#ad4173e51037e5a579c75c88ed136f531" title="Sets the value to read at given index in read request.">SOPC_ReadRequest_SetReadValue</a>, etc.). Note: it shall be allocated on heap since it will be freed by S2OPC library during treatment.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>Pointer into which instance of response complying with the OPC UA request is provided: <ul>
<li><a class="el" href="sopc__types_8h.html#a4c3d2189ef1613380cda420976b9c7e0">OpcUa_ReadResponse</a> </li>
<li><a class="el" href="sopc__types_8h.html#aed6fb2c81e323885d0d20ca8c4a37442">OpcUa_WriteResponse</a> </li>
<li><a class="el" href="sopc__types_8h.html#a36f78a77fd677db7fedf3ccefdc52fa4">OpcUa_BrowseResponse</a> </li>
<li><a class="el" href="sopc__types_8h.html#a013b211d538737b60b26936f1810bda3">OpcUa_TranslateBrowsePathsToNodeIdsResponse</a> </li>
<li><a class="el" href="sopc__types_8h.html#aca63b6fbe46cc6226e52f3a3e1d35501">OpcUa_GetEndpointsResponse</a> </li>
<li><a class="el" href="sopc__types_8h.html#ab2a1ca37e68017cef8a66a3899f1ec7d">OpcUa_FindServersResponse</a> </li>
<li><a class="el" href="sopc__types_8h.html#ab6f324483a41a94e6d6ada49f96517ab">OpcUa_FindServersOnNetworkResponse</a> </li>
<li><a class="el" href="sopc__types_8h.html#acd12a7fc03397ecf8237dad38f417f4f">OpcUa_RegisterServer2Response</a></li>
</ul>
In case of service failure the response type is always <a class="el" href="sopc__types_8h.html#a813d4f1fb96d8007c4e54b2fe279517d">OpcUa_ServiceFault</a>, in this case the <code>response.encodeableType</code> points to <a class="el" href="sopc__types_8h.html#ae2431428f899faa8da7efe65fe9ee196">OpcUa_ServiceFault_EncodeableType</a> and <a class="el" href="sopc__builtintypes_8h.html#ad4bbc020bdcf592ee8c9ddd2cbc46e20" title="Evaluates if the provided status is Good.">SOPC_IsGoodStatus</a>(<code>response.ResponseHeader.ServiceResult</code>) is <code>false</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SOPC_STATUS_OK in case of success, SOPC_STATUS_INVALID_STATE if the server is not running or a synchronous call is already ongoing otherwise SOPC_STATUS_TIMEOUT if <a class="el" href="libs2opc__server__internal_8h.html#aa8e7de376f2aa4ff35a130b1f1379f2b">SOPC_HELPER_LOCAL_RESPONSE_TIMEOUT_MS</a> is reached before response provided.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>request memory is managed by the server after a successful return or in case of timeout </dd>
<dd>
caller is responsible of output response memory after successful call</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>local service synchronous call shall only be called from the application thread and shall not be called from server callbacks used for notification, asynchronous response, client event, etc. (<a class="el" href="libs2opc__server__config_8h.html#ab044fa72d01b0a3cf2340a4265cb2ba6" title="Type of callback to provide to receive asynchronous local service response.">SOPC_LocalServiceAsyncResp_Fct</a>, <a class="el" href="libs2opc__server__config_8h.html#a5a3006e47ee8ca1891b844c1cb83c0bf" title="Type of callback to provide to receive write notification on address space.">SOPC_WriteNotif_Fct</a>, <a class="el" href="sopc__user__app__itf_8h.html#a20861cf43223f7b171bc951e9c751143" title="Toolkit communication events application callback type.">SOPC_ComEvent_Fct</a>, etc.). Otherwise this will lead to a temporary deadlock situation which will lead to fail with SOPC_STATUS_TIMEOUT. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jun 13 2024 14:49:50 for S2OPC OPCUA Toolkit by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
