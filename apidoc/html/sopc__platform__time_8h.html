<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>S2OPC OPCUA Toolkit: src/Common/helpers_platform_dep/sopc_platform_time.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">S2OPC OPCUA Toolkit
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_ba210d1fa67db7bee1bb22e0a3c11d9f.html">Common</a></li><li class="navelem"><a class="el" href="dir_fc6a59cf14d6ce0feea0d828acd5a095.html">helpers_platform_dep</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sopc_platform_time.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A platform independent API to handle time management.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;p_time.h&quot;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &quot;<a class="el" href="sopc__builtintypes_8h_source.html">sopc_builtintypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sopc__enums_8h_source.html">sopc_enums.h</a>&quot;</code><br />
</div>
<p><a href="sopc__platform__time_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab6f05da03efca70b66d4accae6e78e6f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#ab6f05da03efca70b66d4accae6e78e6f">SOPC_MONOTONIC_CLOCK</a>&#160;&#160;&#160;true</td></tr>
<tr class="memdesc:ab6f05da03efca70b66d4accae6e78e6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">the toolkit provide and use monotonic clock for time references (used for timers) Note: it is possible to set the clock as non monotonic defining variable on configuration. Otherwise default value is true.  <a href="sopc__platform__time_8h.html#ab6f05da03efca70b66d4accae6e78e6f">More...</a><br /></td></tr>
<tr class="separator:ab6f05da03efca70b66d4accae6e78e6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:af7aa9f022e4f0e24a1c5aada5869d638"><td class="memItemLeft" align="right" valign="top">typedef uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#af7aa9f022e4f0e24a1c5aada5869d638">SOPC_TimeReference</a></td></tr>
<tr class="separator:af7aa9f022e4f0e24a1c5aada5869d638"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a24b643a5669f875963fca303d30af3ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#a24b643a5669f875963fca303d30af3ec">SOPC_Sleep</a> (unsigned int milliseconds)</td></tr>
<tr class="memdesc:a24b643a5669f875963fca303d30af3ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspend current thread execution for (at least) a millisecond interval.  <a href="sopc__platform__time_8h.html#a24b643a5669f875963fca303d30af3ec">More...</a><br /></td></tr>
<tr class="separator:a24b643a5669f875963fca303d30af3ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eeda1b41a20d47efb48808fe83fd2ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sopc__builtintypes_8h.html#a61a73148e994b49ed5337c472faa21b4">SOPC_DateTime</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#a0eeda1b41a20d47efb48808fe83fd2ba">SOPC_Time_GetCurrentTimeUTC</a> (void)</td></tr>
<tr class="memdesc:a0eeda1b41a20d47efb48808fe83fd2ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the current time in DateTime format which is 100 nanoseconds from 1601/01/01 00:00:00 UTC  <a href="sopc__platform__time_8h.html#a0eeda1b41a20d47efb48808fe83fd2ba">More...</a><br /></td></tr>
<tr class="separator:a0eeda1b41a20d47efb48808fe83fd2ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4be583b7de8a3fd6d3fff64bf4cb7cb0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sopc__platform__time_8h.html#af7aa9f022e4f0e24a1c5aada5869d638">SOPC_TimeReference</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#a4be583b7de8a3fd6d3fff64bf4cb7cb0">SOPC_TimeReference_GetCurrent</a> (void)</td></tr>
<tr class="memdesc:a4be583b7de8a3fd6d3fff64bf4cb7cb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the current time reference  <a href="sopc__platform__time_8h.html#a4be583b7de8a3fd6d3fff64bf4cb7cb0">More...</a><br /></td></tr>
<tr class="separator:a4be583b7de8a3fd6d3fff64bf4cb7cb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b3047f622bb6db59b94ee577c4cda10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#a3b3047f622bb6db59b94ee577c4cda10">SOPC_Time_Breakdown_Local</a> (time_t t, struct tm *tm)</td></tr>
<tr class="memdesc:a3b3047f622bb6db59b94ee577c4cda10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Breaks down a timestamp to its structured representation in local time.  <a href="sopc__platform__time_8h.html#a3b3047f622bb6db59b94ee577c4cda10">More...</a><br /></td></tr>
<tr class="separator:a3b3047f622bb6db59b94ee577c4cda10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa284b8655fe9acb673afc2c47f3161c8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#aa284b8655fe9acb673afc2c47f3161c8">SOPC_Time_Breakdown_UTC</a> (time_t t, struct tm *tm)</td></tr>
<tr class="memdesc:aa284b8655fe9acb673afc2c47f3161c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Breaks down a timestamp to its structured representation in UTC time.  <a href="sopc__platform__time_8h.html#aa284b8655fe9acb673afc2c47f3161c8">More...</a><br /></td></tr>
<tr class="separator:aa284b8655fe9acb673afc2c47f3161c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68d2b643992fdf2b45dc91587b097ada"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#a68d2b643992fdf2b45dc91587b097ada">SOPC_RealTime_GetTime</a> (<a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *t)</td></tr>
<tr class="memdesc:a68d2b643992fdf2b45dc91587b097ada"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the current time in t.  <a href="sopc__platform__time_8h.html#a68d2b643992fdf2b45dc91587b097ada">More...</a><br /></td></tr>
<tr class="separator:a68d2b643992fdf2b45dc91587b097ada"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5c1a3b28e883d8d6d84d6ba851f92b3"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#af5c1a3b28e883d8d6d84d6ba851f92b3">SOPC_RealTime_DeltaUs</a> (const <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *tRef, const <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *t)</td></tr>
<tr class="memdesc:af5c1a3b28e883d8d6d84d6ba851f92b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare two <code><a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a></code> elements into microseconds.  <a href="sopc__platform__time_8h.html#af5c1a3b28e883d8d6d84d6ba851f92b3">More...</a><br /></td></tr>
<tr class="separator:af5c1a3b28e883d8d6d84d6ba851f92b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee9ba8d18e79bd5b126283a04c5ea8e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#aee9ba8d18e79bd5b126283a04c5ea8e6">SOPC_RealTime_AddSynchedDuration</a> (<a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *t, uint64_t duration_us, int32_t offset_us)</td></tr>
<tr class="memdesc:aee9ba8d18e79bd5b126283a04c5ea8e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds an offset to a <em><a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a></em> object, ensuring a specific time offset towards a synchronized clock within a periodic time window. The offset is measured regarding the dateTime Clock, thus implying that it is synchronized to some external PtP reference.  <a href="sopc__platform__time_8h.html#aee9ba8d18e79bd5b126283a04c5ea8e6">More...</a><br /></td></tr>
<tr class="separator:aee9ba8d18e79bd5b126283a04c5ea8e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdb8dbce26e0f23a33d4aced4a3e4ee2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#afdb8dbce26e0f23a33d4aced4a3e4ee2">SOPC_RealTime_IsExpired</a> (const <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *t, const <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *now)</td></tr>
<tr class="memdesc:afdb8dbce26e0f23a33d4aced4a3e4ee2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks is a date is in the future (relatively to another date)  <a href="sopc__platform__time_8h.html#afdb8dbce26e0f23a33d4aced4a3e4ee2">More...</a><br /></td></tr>
<tr class="separator:afdb8dbce26e0f23a33d4aced4a3e4ee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18a43c4420eebe761199e921a85d4532"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#a18a43c4420eebe761199e921a85d4532">SOPC_RealTime_SleepUntil</a> (const <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *date)</td></tr>
<tr class="memdesc:a18a43c4420eebe761199e921a85d4532"><td class="mdescLeft">&#160;</td><td class="mdescRight">Precise sleep until specified date.  <a href="sopc__platform__time_8h.html#a18a43c4420eebe761199e921a85d4532">More...</a><br /></td></tr>
<tr class="separator:a18a43c4420eebe761199e921a85d4532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ed87de4d923290d051887338a2d35e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#a5ed87de4d923290d051887338a2d35e6">SOPC_RealTime_Create</a> (const <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *copy)</td></tr>
<tr class="memdesc:a5ed87de4d923290d051887338a2d35e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new time reference.  <a href="sopc__platform__time_8h.html#a5ed87de4d923290d051887338a2d35e6">More...</a><br /></td></tr>
<tr class="separator:a5ed87de4d923290d051887338a2d35e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9ce0fae6e3b44a75dbc066989023878"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#ac9ce0fae6e3b44a75dbc066989023878">SOPC_RealTime_Copy</a> (<a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *to, const <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *from)</td></tr>
<tr class="memdesc:ac9ce0fae6e3b44a75dbc066989023878"><td class="mdescLeft">&#160;</td><td class="mdescRight">A copy of a non-NULL <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> structure.  <a href="sopc__platform__time_8h.html#ac9ce0fae6e3b44a75dbc066989023878">More...</a><br /></td></tr>
<tr class="separator:ac9ce0fae6e3b44a75dbc066989023878"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b7dfaf61115b6f03c360967539717a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__platform__time_8h.html#a7b7dfaf61115b6f03c360967539717a1">SOPC_RealTime_Delete</a> (<a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> **t)</td></tr>
<tr class="memdesc:a7b7dfaf61115b6f03c360967539717a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a time reference.  <a href="sopc__platform__time_8h.html#a7b7dfaf61115b6f03c360967539717a1">More...</a><br /></td></tr>
<tr class="separator:a7b7dfaf61115b6f03c360967539717a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A platform independent API to handle time management. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ab6f05da03efca70b66d4accae6e78e6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6f05da03efca70b66d4accae6e78e6f">&#9670;&nbsp;</a></span>SOPC_MONOTONIC_CLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOPC_MONOTONIC_CLOCK&#160;&#160;&#160;true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>the toolkit provide and use monotonic clock for time references (used for timers) Note: it is possible to set the clock as non monotonic defining variable on configuration. Otherwise default value is true. </p>
<p>PubSub publications require a time that has finer resolution than C99 time_t. The OPC UA type <em>Duration</em> is a double representing ms delays between publications. It's resolution goes finer than the nanosecond resolution.</p>
<p>The <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> type should be defined to be as precise as possible to support sub-milliseconds publications. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="af7aa9f022e4f0e24a1c5aada5869d638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7aa9f022e4f0e24a1c5aada5869d638">&#9670;&nbsp;</a></span>SOPC_TimeReference</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint64_t <a class="el" href="sopc__platform__time_8h.html#af7aa9f022e4f0e24a1c5aada5869d638">SOPC_TimeReference</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The platform-specific implementation of "p_time.h" shall provide the actual definition of</p><ul>
<li><a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> to hold a RealTime information (date with no specific origin). It is only used to compute time differences. However, in case the system has an external PtP synchronization source, it is mandatory that this date is aligned to that PtP source clock modulo 1 second. The implementation must also use a monotonic clock in all platform implementation even if the system time gets back or forth (e.g. because of ntp).</li>
<li>all functions defined in this header except <a class="el" href="sopc__platform__time_8h.html#a5ed87de4d923290d051887338a2d35e6" title="Create a new time reference.">SOPC_RealTime_Create</a> and <a class="el" href="sopc__platform__time_8h.html#a7b7dfaf61115b6f03c360967539717a1" title="Deletes a time reference.">SOPC_RealTime_Delete</a>. Time reference type (milliseconds) </li>
</ul>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a24b643a5669f875963fca303d30af3ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24b643a5669f875963fca303d30af3ec">&#9670;&nbsp;</a></span>SOPC_Sleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SOPC_Sleep </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>milliseconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Suspend current thread execution for (at least) a millisecond interval. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">milliseconds</td><td>The milliseconds interval value for which execution must be suspended </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0eeda1b41a20d47efb48808fe83fd2ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0eeda1b41a20d47efb48808fe83fd2ba">&#9670;&nbsp;</a></span>SOPC_Time_GetCurrentTimeUTC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sopc__builtintypes_8h.html#a61a73148e994b49ed5337c472faa21b4">SOPC_DateTime</a> SOPC_Time_GetCurrentTimeUTC </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return the current time in DateTime format which is 100 nanoseconds from 1601/01/01 00:00:00 UTC </p>
<p>Note: since the clock is not monotonic, it should not be used to measure elapsed time</p>
<dl class="section return"><dt>Returns</dt><dd>the current time in DateTime format </dd></dl>

</div>
</div>
<a id="a4be583b7de8a3fd6d3fff64bf4cb7cb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4be583b7de8a3fd6d3fff64bf4cb7cb0">&#9670;&nbsp;</a></span>SOPC_TimeReference_GetCurrent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sopc__platform__time_8h.html#af7aa9f022e4f0e24a1c5aada5869d638">SOPC_TimeReference</a> SOPC_TimeReference_GetCurrent </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return the current time reference </p>
<p>Note: clock is monotonic if SOPC_MONOTONIC_CLOCK is true</p>
<dl class="section return"><dt>Returns</dt><dd>the current time reference </dd></dl>

</div>
</div>
<a id="a3b3047f622bb6db59b94ee577c4cda10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b3047f622bb6db59b94ee577c4cda10">&#9670;&nbsp;</a></span>SOPC_Time_Breakdown_Local()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a> SOPC_Time_Breakdown_Local </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tm *&#160;</td>
          <td class="paramname"><em>tm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Breaks down a timestamp to its structured representation in local time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the timestamp. </td></tr>
    <tr><td class="paramname">tm</td><td>the structured representation of the timestamp in local time.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="sopc__enums_8h.html#a8419f6ec9e9cf6f33b24806124972652a233eaa99afb8ebf03a2c5b7ed968522d">SOPC_STATUS_OK</a> in case of success, <a class="el" href="sopc__enums_8h.html#a8419f6ec9e9cf6f33b24806124972652afb5481c58ded92ee6c86a13092d57f54">SOPC_STATUS_NOK</a> in case of error. </dd></dl>

</div>
</div>
<a id="aa284b8655fe9acb673afc2c47f3161c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa284b8655fe9acb673afc2c47f3161c8">&#9670;&nbsp;</a></span>SOPC_Time_Breakdown_UTC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libs2opc__client_8h.html#a8419f6ec9e9cf6f33b24806124972652">SOPC_ReturnStatus</a> SOPC_Time_Breakdown_UTC </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tm *&#160;</td>
          <td class="paramname"><em>tm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Breaks down a timestamp to its structured representation in UTC time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the timestamp. </td></tr>
    <tr><td class="paramname">tm</td><td>the structured representation of the timestamp in UTC time.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="sopc__enums_8h.html#a8419f6ec9e9cf6f33b24806124972652a233eaa99afb8ebf03a2c5b7ed968522d">SOPC_STATUS_OK</a> in case of success, <a class="el" href="sopc__enums_8h.html#a8419f6ec9e9cf6f33b24806124972652afb5481c58ded92ee6c86a13092d57f54">SOPC_STATUS_NOK</a> in case of error. </dd></dl>

</div>
</div>
<a id="a68d2b643992fdf2b45dc91587b097ada"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68d2b643992fdf2b45dc91587b097ada">&#9670;&nbsp;</a></span>SOPC_RealTime_GetTime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SOPC_RealTime_GetTime </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store the current time in t. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>A Non-null time reference </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false if failed. </dd></dl>

</div>
</div>
<a id="af5c1a3b28e883d8d6d84d6ba851f92b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5c1a3b28e883d8d6d84d6ba851f92b3">&#9670;&nbsp;</a></span>SOPC_RealTime_DeltaUs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t SOPC_RealTime_DeltaUs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *&#160;</td>
          <td class="paramname"><em>tRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compare two <code><a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a></code> elements into microseconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tRef</td><td>The reference time. Shall be non-NULL </td></tr>
    <tr><td class="paramname">t</td><td>A <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> value (current time is used if NULL). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of microseconds between the reference <code>tRef</code> and <code>t</code>. Positive if <code>t</code> is after <code>tRef</code> </dd></dl>

</div>
</div>
<a id="aee9ba8d18e79bd5b126283a04c5ea8e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee9ba8d18e79bd5b126283a04c5ea8e6">&#9670;&nbsp;</a></span>SOPC_RealTime_AddSynchedDuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SOPC_RealTime_AddSynchedDuration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>duration_us</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>offset_us</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds an offset to a <em><a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a></em> object, ensuring a specific time offset towards a synchronized clock within a periodic time window. The offset is measured regarding the dateTime Clock, thus implying that it is synchronized to some external PtP reference. </p>
<p>For example, if <em>duration_us</em> is 100k (100ms) and <em>offset_us</em> is 20k (20 ms), and if we name "dtss" the "sub-second part of DateTime corresponding to returned \a t":</p>
<p>dtss = k * 100ms + 20ms (with k integer) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>A Non-null time reference </td></tr>
    <tr><td class="paramname">duration_us</td><td>The timeslice period (must be a divisor of 1 second, otherwise result is undefined) if offset_us is negative, then no window is used and the function simply adds duration_us to <em>t</em> </td></tr>
    <tr><td class="paramname">offset_us</td><td>The offset in microseconds in the time window. If no PtP source is synchronized, or if this offset is not used, it must be set to -1. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afdb8dbce26e0f23a33d4aced4a3e4ee2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdb8dbce26e0f23a33d4aced4a3e4ee2">&#9670;&nbsp;</a></span>SOPC_RealTime_IsExpired()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SOPC_RealTime_IsExpired </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks is a date is in the future (relatively to another date) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>A non-NULL date </td></tr>
    <tr><td class="paramname">now</td><td>if non-NULL, this date will be compared to t. If NULL, the current date will be used instead.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if <em>t</em> &lt; <em>now</em>. Typically,<div class="fragment"><div class="line"><a class="code" href="sopc__platform__time_8h.html#afdb8dbce26e0f23a33d4aced4a3e4ee2">SOPC_RealTime_IsExpired</a>(&amp;t, NULL) </div>
</div><!-- fragment --> returns true if <em>t</em> is in the past (event reached), and false if <em>t</em> is in the future. </dd></dl>

</div>
</div>
<a id="a18a43c4420eebe761199e921a85d4532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18a43c4420eebe761199e921a85d4532">&#9670;&nbsp;</a></span>SOPC_RealTime_SleepUntil()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SOPC_RealTime_SleepUntil </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *&#160;</td>
          <td class="paramname"><em>date</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Precise sleep until specified date. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">date</td><td>The date at which the function shall return </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true in case of success </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If date is in the past, the function yields but does not wait. </dd>
<dd>
The calling thread must have appropriate scheduling policy and priority for precise timing. </dd></dl>

</div>
</div>
<a id="a5ed87de4d923290d051887338a2d35e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ed87de4d923290d051887338a2d35e6">&#9670;&nbsp;</a></span>SOPC_RealTime_Create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a>* SOPC_RealTime_Create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *&#160;</td>
          <td class="paramname"><em>copy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new time reference. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">copy</td><td>A possibly NULL time reference.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new time reference containing the current time if <em>copy</em> is NULL, or a copy of <em>copy</em> otherwise </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Every object initialized by <em>SOPC_RealTime_Create</em> must be cleared by <em>SOPC_RealTime_Delete</em> </dd></dl>

</div>
</div>
<a id="ac9ce0fae6e3b44a75dbc066989023878"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9ce0fae6e3b44a75dbc066989023878">&#9670;&nbsp;</a></span>SOPC_RealTime_Copy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SOPC_RealTime_Copy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> *&#160;</td>
          <td class="paramname"><em>from</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A copy of a non-NULL <a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">to</td><td>Pointer to the destination </td></tr>
    <tr><td class="paramname">from</td><td>Pointer to the source </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true in case of success </dd>
<dd>
false if <em>from</em> or <em>to</em> is NULL </dd></dl>

</div>
</div>
<a id="a7b7dfaf61115b6f03c360967539717a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b7dfaf61115b6f03c360967539717a1">&#9670;&nbsp;</a></span>SOPC_RealTime_Delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SOPC_RealTime_Delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSOPC__RealTime.html">SOPC_RealTime</a> **&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a time reference. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>A reference returned by <em>SOPC_RealTime_Create</em> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="asopc__platform__time_8h_html_afdb8dbce26e0f23a33d4aced4a3e4ee2"><div class="ttname"><a href="sopc__platform__time_8h.html#afdb8dbce26e0f23a33d4aced4a3e4ee2">SOPC_RealTime_IsExpired</a></div><div class="ttdeci">bool SOPC_RealTime_IsExpired(const SOPC_RealTime *t, const SOPC_RealTime *now)</div><div class="ttdoc">Checks is a date is in the future (relatively to another date)</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jun 2 2023 15:24:15 for S2OPC OPCUA Toolkit by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
