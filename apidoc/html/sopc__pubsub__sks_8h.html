<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>S2OPC OPCUA Toolkit: src/PubSub/security/sopc_pubsub_sks.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">S2OPC OPCUA Toolkit
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_f0204f00f7eec24e509304baf7a032c6.html">PubSub</a></li><li class="navelem"><a class="el" href="dir_d42023fa070537ccfa26ccdcdf7872c2.html">security</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sopc_pubsub_sks.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>PubSub Security Keys Service configuration: define the ::SOPC_SKManager(s) to use to retrieve the keys.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="sopc__pubsub__conf_8h_source.html">sopc_pubsub_conf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sopc__secret__buffer_8h_source.html">sopc_secret_buffer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sopc__sk__builder_8h_source.html">sopc_sk_builder.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sopc__sk__scheduler_8h_source.html">sopc_sk_scheduler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sopc__sk__secu__group__managers_8h_source.html">sopc_sk_secu_group_managers.h</a>&quot;</code><br />
</div>
<p><a href="sopc__pubsub__sks_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structSOPC__PubSubSKS__Keys.html">SOPC_PubSubSKS_Keys</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5c302898f076e1a76080ea73f3bb3621" id="r_a5c302898f076e1a76080ea73f3bb3621"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__pubsub__sks_8h.html#a5c302898f076e1a76080ea73f3bb3621">SOPC_PUBSUB_SKS_CURRENT_TOKENID</a>&#160;&#160;&#160;<a class="el" href="sopc__sk__manager_8h.html#a23cf42ec27d5600075744e1f7ec63204">SOPC_SK_MANAGER_CURRENT_TOKEN_ID</a></td></tr>
<tr class="separator:a5c302898f076e1a76080ea73f3bb3621"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa49868300318299a5c068ee3fab86d75" id="r_aa49868300318299a5c068ee3fab86d75"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structSOPC__PubSubSKS__Keys.html">SOPC_PubSubSKS_Keys</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__pubsub__sks_8h.html#aa49868300318299a5c068ee3fab86d75">SOPC_PubSubSKS_Keys</a></td></tr>
<tr class="separator:aa49868300318299a5c068ee3fab86d75"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a90c9360e08d42741a5111cb5d2b1d0f6" id="r_a90c9360e08d42741a5111cb5d2b1d0f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__pubsub__sks_8h.html#a90c9360e08d42741a5111cb5d2b1d0f6">SOPC_PubSubSKS_Init</a> (void)</td></tr>
<tr class="memdesc:a90c9360e08d42741a5111cb5d2b1d0f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the PubSubSKS module.  <br /></td></tr>
<tr class="separator:a90c9360e08d42741a5111cb5d2b1d0f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24a969c52ca8d365bd642cd5d222beb7" id="r_a24a969c52ca8d365bd642cd5d222beb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__pubsub__sks_8h.html#a24a969c52ca8d365bd642cd5d222beb7">SOPC_PubSubSKS_Clear</a> (void)</td></tr>
<tr class="memdesc:a24a969c52ca8d365bd642cd5d222beb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the PubSubSKS and SKManager(s). It shall be called after clearing the ::SOPC_SKScheduler managing the managers if used.  <br /></td></tr>
<tr class="separator:a24a969c52ca8d365bd642cd5d222beb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7b47806f306293ce115b7f6117f2127" id="r_ae7b47806f306293ce115b7f6117f2127"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__pubsub__sks_8h.html#ae7b47806f306293ce115b7f6117f2127">SOPC_PubSubSKS_CreateManagersFromConfig</a> (const <a class="el" href="sopc__pubsub__conf_8h.html#aca0e954e0cbc1d79a4bf605c8bbed7f9">SOPC_PubSubConfiguration</a> *pubSubConfig)</td></tr>
<tr class="memdesc:ae7b47806f306293ce115b7f6117f2127"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and adds the SK Managers for each security group from the PubSub configuration (readers and writers).  <br /></td></tr>
<tr class="separator:ae7b47806f306293ce115b7f6117f2127"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9a372d96d51dd0e12ed96cf0c9bb55f" id="r_ad9a372d96d51dd0e12ed96cf0c9bb55f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__pubsub__sks_8h.html#ad9a372d96d51dd0e12ed96cf0c9bb55f">SOPC_PubSubSKS_AddSkManager</a> (<a class="el" href="structSOPC__SKManager.html">SOPC_SKManager</a> *skm)</td></tr>
<tr class="memdesc:ad9a372d96d51dd0e12ed96cf0c9bb55f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the Security Keys Manager to use to retrieve the keys for UADP secure exchanges with the associated security group id defined in the manager.  <br /></td></tr>
<tr class="separator:ad9a372d96d51dd0e12ed96cf0c9bb55f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89ea5d408a781c7282b279e214727021" id="r_a89ea5d408a781c7282b279e214727021"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structSOPC__PubSubSKS__Keys.html">SOPC_PubSubSKS_Keys</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__pubsub__sks_8h.html#a89ea5d408a781c7282b279e214727021">SOPC_PubSubSKS_GetSecurityKeys</a> (const char *securityGroupId, uint32_t tokenId)</td></tr>
<tr class="memdesc:a89ea5d408a781c7282b279e214727021"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return security key from a security group id. This function is automatically called by Publisher and Subscriber schedulers.  <br /></td></tr>
<tr class="separator:a89ea5d408a781c7282b279e214727021"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51b1ec6f72b9f1cc696e536559a6c2c3" id="r_a51b1ec6f72b9f1cc696e536559a6c2c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__pubsub__sks_8h.html#a51b1ec6f72b9f1cc696e536559a6c2c3">SOPC_PubSubSKS_Keys_Delete</a> (<a class="el" href="structSOPC__PubSubSKS__Keys.html">SOPC_PubSubSKS_Keys</a> *keys)</td></tr>
<tr class="memdesc:a51b1ec6f72b9f1cc696e536559a6c2c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear a <a class="el" href="structSOPC__PubSubSKS__Keys.html">SOPC_PubSubSKS_Keys</a> the given parameter can be freed after the function returns.  <br /></td></tr>
<tr class="separator:a51b1ec6f72b9f1cc696e536559a6c2c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dcbb864ae7f77ed23965fd02c315952" id="r_a2dcbb864ae7f77ed23965fd02c315952"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__pubsub__sks_8h.html#a2dcbb864ae7f77ed23965fd02c315952">SOPC_PubSubSKS_AddTasks</a> (<a class="el" href="structSOPC__SKscheduler.html">SOPC_SKscheduler</a> *scheduler, <a class="el" href="structSOPC__SKBuilder.html">SOPC_SKBuilder</a> *builder, <a class="el" href="structSOPC__SKProvider.html">SOPC_SKProvider</a> *provider, uint32_t msFirstUpdate)</td></tr>
<tr class="memdesc:a2dcbb864ae7f77ed23965fd02c315952"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a task to the SK scheduler for each security group SK manager add with <a class="el" href="sopc__pubsub__sks_8h.html#ad9a372d96d51dd0e12ed96cf0c9bb55f" title="Add the Security Keys Manager to use to retrieve the keys for UADP secure exchanges with the associat...">SOPC_PubSubSKS_AddSkManager</a>. For each task, the scheduler will trigger the builder to update the keys from provider to manager. An initial period is provided for the first update, and subsequent updates are done at half the keys lifetime.  <br /></td></tr>
<tr class="separator:a2dcbb864ae7f77ed23965fd02c315952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada9bfd5362a8b3453e708b8766b5a5bd" id="r_ada9bfd5362a8b3453e708b8766b5a5bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structSOPC__SKManager.html">SOPC_SKManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sopc__pubsub__sks_8h.html#ada9bfd5362a8b3453e708b8766b5a5bd">SOPC_PubSubSKS_GetSkManager</a> (const char *securityGroupId)</td></tr>
<tr class="memdesc:ada9bfd5362a8b3453e708b8766b5a5bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Security Keys Manager to use to retrieve the keys for UADP secure exchanges with the given security group id.  <br /></td></tr>
<tr class="separator:ada9bfd5362a8b3453e708b8766b5a5bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>PubSub Security Keys Service configuration: define the ::SOPC_SKManager(s) to use to retrieve the keys. </p>
<p>To define a security keys manager(s) <a class="el" href="sopc__pubsub__sks_8h.html#a90c9360e08d42741a5111cb5d2b1d0f6" title="Initialise the PubSubSKS module.">SOPC_PubSubSKS_Init</a> and <a class="el" href="sopc__pubsub__sks_8h.html#ad9a372d96d51dd0e12ed96cf0c9bb55f" title="Add the Security Keys Manager to use to retrieve the keys for UADP secure exchanges with the associat...">SOPC_PubSubSKS_AddSkManager</a> shall be called. Each security group in configuration shall have its own <a class="el" href="structSOPC__SKManager.html">SOPC_SKManager</a>.</p>
<p>The Publisher and Subscriber schedulers will then automatically call <a class="el" href="sopc__pubsub__sks_8h.html#a89ea5d408a781c7282b279e214727021" title="Return security key from a security group id. This function is automatically called by Publisher and ...">SOPC_PubSubSKS_GetSecurityKeys</a>. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a5c302898f076e1a76080ea73f3bb3621" name="a5c302898f076e1a76080ea73f3bb3621"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c302898f076e1a76080ea73f3bb3621">&#9670;&#160;</a></span>SOPC_PUBSUB_SKS_CURRENT_TOKENID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOPC_PUBSUB_SKS_CURRENT_TOKENID&#160;&#160;&#160;<a class="el" href="sopc__sk__manager_8h.html#a23cf42ec27d5600075744e1f7ec63204">SOPC_SK_MANAGER_CURRENT_TOKEN_ID</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="aa49868300318299a5c068ee3fab86d75" name="aa49868300318299a5c068ee3fab86d75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa49868300318299a5c068ee3fab86d75">&#9670;&#160;</a></span>SOPC_PubSubSKS_Keys</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structSOPC__PubSubSKS__Keys.html">SOPC_PubSubSKS_Keys</a> <a class="el" href="structSOPC__PubSubSKS__Keys.html">SOPC_PubSubSKS_Keys</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a90c9360e08d42741a5111cb5d2b1d0f6" name="a90c9360e08d42741a5111cb5d2b1d0f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90c9360e08d42741a5111cb5d2b1d0f6">&#9670;&#160;</a></span>SOPC_PubSubSKS_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SOPC_PubSubSKS_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise the PubSubSKS module. </p>

</div>
</div>
<a id="a24a969c52ca8d365bd642cd5d222beb7" name="a24a969c52ca8d365bd642cd5d222beb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24a969c52ca8d365bd642cd5d222beb7">&#9670;&#160;</a></span>SOPC_PubSubSKS_Clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SOPC_PubSubSKS_Clear </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the PubSubSKS and SKManager(s). It shall be called after clearing the ::SOPC_SKScheduler managing the managers if used. </p>
<dl class="section warning"><dt>Warning</dt><dd>When a ::SOPC_SKScheduler is used, the scheduler shall be cleared using ::SOPC_SKScheduler_StopAndClear before calling this function. </dd></dl>

</div>
</div>
<a id="ae7b47806f306293ce115b7f6117f2127" name="ae7b47806f306293ce115b7f6117f2127"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7b47806f306293ce115b7f6117f2127">&#9670;&#160;</a></span>SOPC_PubSubSKS_CreateManagersFromConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SOPC_PubSubSKS_CreateManagersFromConfig </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="sopc__pubsub__conf_8h.html#aca0e954e0cbc1d79a4bf605c8bbed7f9">SOPC_PubSubConfiguration</a> *&#160;</td>
          <td class="paramname"><em>pubSubConfig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates and adds the SK Managers for each security group from the PubSub configuration (readers and writers). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pubSubConfig</td><td>the PubSub configuration to find the security group ids from.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the SK Managers are created successfully, false otherwise. </dd></dl>

</div>
</div>
<a id="ad9a372d96d51dd0e12ed96cf0c9bb55f" name="ad9a372d96d51dd0e12ed96cf0c9bb55f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9a372d96d51dd0e12ed96cf0c9bb55f">&#9670;&#160;</a></span>SOPC_PubSubSKS_AddSkManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SOPC_PubSubSKS_AddSkManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSOPC__SKManager.html">SOPC_SKManager</a> *&#160;</td>
          <td class="paramname"><em>skm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the Security Keys Manager to use to retrieve the keys for UADP secure exchanges with the associated security group id defined in the manager. </p>
<p>This function shall be called once for each security group id that is used in the PubSub configuration. If the security group id is already used, the previous SK Manager is discarded and cleared. The security group id is defined in the manager and shall not be NULL.</p>
<dl class="section note"><dt>Note</dt><dd>When using <a class="el" href="sopc__pubsub__sks_8h.html#ae7b47806f306293ce115b7f6117f2127" title="Creates and adds the SK Managers for each security group from the PubSub configuration (readers and w...">SOPC_PubSubSKS_CreateManagersFromConfig</a>, this function should not be needed.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">skm</td><td>the Security Keys Manager to use to get keys.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the SK Manager is added successfully, false otherwise. </dd></dl>

</div>
</div>
<a id="a89ea5d408a781c7282b279e214727021" name="a89ea5d408a781c7282b279e214727021"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89ea5d408a781c7282b279e214727021">&#9670;&#160;</a></span>SOPC_PubSubSKS_GetSecurityKeys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structSOPC__PubSubSKS__Keys.html">SOPC_PubSubSKS_Keys</a> * SOPC_PubSubSKS_GetSecurityKeys </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>securityGroupId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tokenId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return security key from a security group id. This function is automatically called by Publisher and Subscriber schedulers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">securityGroupId</td><td>a Group Id with security </td></tr>
    <tr><td class="paramname">tokenId</td><td>token id of the requested keys. Current token is requested with <a class="el" href="sopc__pubsub__sks_8h.html#a5c302898f076e1a76080ea73f3bb3621">SOPC_PUBSUB_SKS_CURRENT_TOKENID</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>tokenid and group keys </dd></dl>

</div>
</div>
<a id="a51b1ec6f72b9f1cc696e536559a6c2c3" name="a51b1ec6f72b9f1cc696e536559a6c2c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51b1ec6f72b9f1cc696e536559a6c2c3">&#9670;&#160;</a></span>SOPC_PubSubSKS_Keys_Delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SOPC_PubSubSKS_Keys_Delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSOPC__PubSubSKS__Keys.html">SOPC_PubSubSKS_Keys</a> *&#160;</td>
          <td class="paramname"><em>keys</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear a <a class="el" href="structSOPC__PubSubSKS__Keys.html">SOPC_PubSubSKS_Keys</a> the given parameter can be freed after the function returns. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keys</td><td>object to clear </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2dcbb864ae7f77ed23965fd02c315952" name="a2dcbb864ae7f77ed23965fd02c315952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dcbb864ae7f77ed23965fd02c315952">&#9670;&#160;</a></span>SOPC_PubSubSKS_AddTasks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SOPC_PubSubSKS_AddTasks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSOPC__SKscheduler.html">SOPC_SKscheduler</a> *&#160;</td>
          <td class="paramname"><em>scheduler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSOPC__SKBuilder.html">SOPC_SKBuilder</a> *&#160;</td>
          <td class="paramname"><em>builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSOPC__SKProvider.html">SOPC_SKProvider</a> *&#160;</td>
          <td class="paramname"><em>provider</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>msFirstUpdate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a task to the SK scheduler for each security group SK manager add with <a class="el" href="sopc__pubsub__sks_8h.html#ad9a372d96d51dd0e12ed96cf0c9bb55f" title="Add the Security Keys Manager to use to retrieve the keys for UADP secure exchanges with the associat...">SOPC_PubSubSKS_AddSkManager</a>. For each task, the scheduler will trigger the builder to update the keys from provider to manager. An initial period is provided for the first update, and subsequent updates are done at half the keys lifetime. </p>
<dl class="section warning"><dt>Warning</dt><dd>This function shall only be called after <a class="el" href="sopc__pubsub__sks_8h.html#ad9a372d96d51dd0e12ed96cf0c9bb55f" title="Add the Security Keys Manager to use to retrieve the keys for UADP secure exchanges with the associat...">SOPC_PubSubSKS_AddSkManager</a> has been called for all security groups.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scheduler</td><td>The scheduler to add tasks to </td></tr>
    <tr><td class="paramname">builder</td><td>The builder to use for updating the keys from provider to managers </td></tr>
    <tr><td class="paramname">provider</td><td>The provider to get keys from </td></tr>
    <tr><td class="paramname">msFirstUpdate</td><td>The period used for first update in milliseconds, next updates are done at half keys lifetime.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if all tasks are added successfully, false otherwise (invalid parameters or <a class="el" href="sopc__sk__scheduler_8h.html#a09be360f47b8ee2947f33eb7ba62a1e9" title="Creates a task to call builder after firstMsPeriod milliseconds and then at half the keys lifetime (o...">SOPC_SKscheduler_AddTask</a> failure) </dd></dl>

</div>
</div>
<a id="ada9bfd5362a8b3453e708b8766b5a5bd" name="ada9bfd5362a8b3453e708b8766b5a5bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada9bfd5362a8b3453e708b8766b5a5bd">&#9670;&#160;</a></span>SOPC_PubSubSKS_GetSkManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structSOPC__SKManager.html">SOPC_SKManager</a> * SOPC_PubSubSKS_GetSkManager </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>securityGroupId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the Security Keys Manager to use to retrieve the keys for UADP secure exchanges with the given security group id. </p>
<dl class="section note"><dt>Note</dt><dd>This function should only be needed to retrieve user context in the SK manager.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">securityGroupId</td><td>the security group id to associate the manager with</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the SK Manager if it exists for the given security group id, NULL otherwise. The returned SK Manager is not owned by the caller, it should not be cleared and no reference shall be kept. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 17 2025 13:45:56 for S2OPC OPCUA Toolkit by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
